(function(e){function t(t){for(var a,i,r=t[0],c=t[1],l=t[2],u=0,d=[];u<r.length;u++)i=r[u],n[i]&&d.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],a=!0,r=1;r<o.length;r++){var c=o[r];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=o[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=a,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(o,a,function(t){return e[t]}.bind(null,a));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var p=c;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"1b9b":function(e,t,o){"use strict";var a=o("2eb2"),n=o.n(a);n.a},"21bb":function(e,t,o){"use strict";var a=o("9fb8"),n=o.n(a);n.a},"2b80":function(e,t,o){},"2eb2":function(e,t,o){},3734:function(e,t,o){"use strict";var a=o("df66"),n=o.n(a);n.a},"3d7c":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var a=o("b408"),n=o.n(a),s=o("2b0e"),i=o("bb71");o("da64");s["default"].use(i["a"],{customProperties:!0,iconfont:"fa"});var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app"},[e.showAddButton?o("v-btn",{attrs:{fab:"",fixed:"",bottom:"",right:"",color:"red"},on:{click:e.onNewTopic}},[o("v-icon",[e._v("add")])],1):e._e(),o("v-app",[o("v-toolbar",{attrs:{app:""}},[o("v-icon",[e._v("all_inbox")]),o("v-icon",[e._v("memory")]),o("v-toolbar-title",[o("router-link",{staticClass:"md-title",attrs:{to:{name:"home",params:{}}}},[e._v("ExoCortex")])],1),o("v-spacer"),e.showAddButton?o("v-text-field",{attrs:{value:e.searchText,placeholder:"Search","prepend-icon":"search",clearable:!0},on:{input:e.onSearchTextChanged}}):e._e()],1),o("v-content",{attrs:{app:""}},[o("router-view")],1)],1)],1)},c=[],l=o("7496"),p=o("71d9"),u=o("549c"),d=o("a523"),h=o("8336"),f={name:"app",components:{VApp:l["a"],VToolbar:p["a"],VContent:u["a"],VContainer:d["a"],VBtn:h["a"]},data(){return{showAddButton:!1}},computed:{searchText(){return this.$store.state.search.searchText}},mounted(){this.$store.dispatch("initialize"),this.showAddButton="/"===this.$router.currentRoute.path,this.$router.afterEach((e,t)=>{this.showAddButton="/"===this.$router.currentRoute.path})},methods:{onNewTopic(){this.$store.dispatch("selectTopic",void 0),this.$router.push("/edit")},onSearchTextChanged(e){this.$store.dispatch("setSearchText",e)}}},m=f,v=(o("5c0b"),o("2877")),b=Object(v["a"])(m,r,c,!1,null,null,null);b.options.__file="App.vue";var T=b.exports,x=o("2f62"),g=o("bc3a"),_=o.n(g);const C={state:{topics:{},selectedTopic:void 0},getters:{urgentTopics(e,t,o){let a=Object.values(e.topics).filter(e=>{const t=o.search.searchText.toLowerCase();return e.title.toLowerCase().indexOf(t)>=0||e.text.toLowerCase().indexOf(t)>=0});return a.sort((e,t)=>{return e.score.sum<t.score.sum?1:e.score.sum>t.score.sum?-1:0})},selectedTopic(e){return e.selectedTopic}},mutations:{replaceAll(e,t){e.topics={};for(let o of t)s["default"].set(e.topics,o.id,o)},updateTopic(e,t){s["default"].set(e.topics,t.id,t),void 0!==e.selectedTopic&&t.id===e.selectedTopic.id&&(e.selectedTopic=t)},selectTopic(e,t){e.selectedTopic=t},deleteTopic(e,t){s["default"].delete(e.topics,t),void 0!==e.selectedTopic&&e.selectedTopic.id===t&&(e.selectedTopic=void 0)},SOCKET_ONMESSAGE(e,t){console.log("ws:",t)},SOCKET_ONOPEN(e,t){},SOCKET_ONCLOSE(e,t){},SOCKET_ONERROR(e,t){console.error(t)}},actions:{initialize({commit:e}){_.a.get("/api/topics/").then(t=>{const o=t.data;e("replaceAll",o)})},updateTopic({commit:e},t){void 0===t.id?_.a.post("/api/topics/",t).then(t=>{e("updateTopic",t.data),e("selectTopic",t.data)}):(""===t.due&&(t.due=null),""===t.ready&&(t.ready=null),_.a.put("/api/topics/"+t.id+"/",t).then(t=>{e("updateTopic",t.data)}))},selectTopic({commit:e},t){e("selectTopic",t)},deleteTopic({commit:e},t){_.a.delete("/api/topics/"+t.id+"/").then(o=>{e("deleteTopic",t.id)})}}};var w=C;const O={state:{searchText:""},mutations:{SETSEARCHTEXT(e,t){e.searchText=t||""}},actions:{setSearchText({commit:e},t){e("SETSEARCHTEXT",t)}}};var k=O;_.a.defaults.xsrfCookieName="csrftoken",_.a.defaults.xsrfHeaderName="X-CSRFTOKEN",_.a.defaults.withCredentials=!0,s["default"].use(x["a"]);var y=new x["a"].Store({strict:!0,modules:{topics:w,search:k},mutations:{SOCKET_ONMESSAGE(e,t){console.log("ws:",t)},SOCKET_ONOPEN(e,t){},SOCKET_ONCLOSE(e,t){},SOCKET_ONERROR(e,t){console.error(t)}}});_.a.interceptors.response.use(function(e){return e},function(e){return 403===e.response.status&&(window.location.href="/login/"),Promise.reject(e)});var E=o("9483");Object(E["a"])("/static/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached(){console.log("Content has been cached for offline use.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var S=o("8c4f"),$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("topic-list",{attrs:{topics:e.urgentTopics},on:{"topic-selected":e.onSelect}})],1)},P=[],V=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"topic-list"},[e.title?o("h1",[e._v(e._s(e.title))]):e._e(),o("v-list",e._l(e.topics,function(t){return o("v-list-tile",{key:t.id,attrs:{color:e.color(t)},on:{click:function(o){e.onClick(t)}}},[o("div",{staticClass:"topic-list-item"},[o("v-list-tile-content",[o("v-list-tile-title",{domProps:{textContent:e._s(t.title)}}),e.showText?o("v-list-tile-sub-title",{domProps:{textContent:e._s(t.text)}}):e._e()],1)],1),o("div",{staticClass:"score"},[e._v(e._s(t.score.sum))])])}))],1)},j=[],A=o("8860"),N=o("ce7e"),R=o("ba95"),D=o("5d23"),L={props:["title","topics"],components:{VList:A["a"],VDivider:N["a"],VListTile:R["a"],VListTileContent:D["a"],VListTileTitle:D["b"]},computed:{showText(){return""!=this.$store.state.search.searchText}},methods:{onClick(e){this.$emit("topic-selected",e)},color(e){return e.score.reasons["is overdue"]?"error":e.score.sum>60?"warning":e.complete?"success":void 0}}},B=L,K=(o("e0db"),Object(v["a"])(B,V,j,!1,null,null,null));K.options.__file="TopicList.vue";var M=K.exports,z={name:"home",components:{TopicList:M},computed:{urgentTopics(){return this.$store.getters.urgentTopics}},methods:{onSelect(e){this.$store.dispatch("selectTopic",e),this.$router.push("/edit")}}},F=z,H=(o("21bb"),Object(v["a"])(F,$,P,!1,null,null,null));H.options.__file="Home.vue";var X=H.exports,G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"edit-topic"},[o("v-container",[o("topic",{attrs:{topic:e.selectedTopic},on:{"topic-changed":e.onTopicChanged}}),o("v-btn",{attrs:{flat:""},on:{click:e.onDelete}},[e._v("Delete")])],1)],1)},J=[],q=o("b0af"),I=o("99d9"),Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"topic"},[o("v-text-field",{on:{change:e.onChange},model:{value:e.template.title,callback:function(t){e.$set(e.template,"title",t)},expression:"template.title"}}),e.template.score?o("div",{staticClass:"md-subhead score-reasons"},[o("span",[e._v("Score: "+e._s(e.template.score.sum))]),e._l(e.template.score.reasons,function(t,a,n){return o("span",{key:n},[e._v("("+e._s(a)+": "+e._s(t)+")")])})],2):e._e(),o("div",{staticClass:"horizontal"},[o("v-checkbox",{attrs:{label:"pinned"},on:{change:e.onChange},model:{value:e.template.pinned,callback:function(t){e.$set(e.template,"pinned",t)},expression:"template.pinned"}}),o("v-checkbox",{attrs:{label:"complete"},on:{change:e.onChange},model:{value:e.template.complete,callback:function(t){e.$set(e.template,"complete",t)},expression:"template.complete"}})],1),o("v-dialog",{attrs:{lazy:"","full-width":"",width:"290px"},model:{value:e.showDuePicker,callback:function(t){e.showDuePicker=t},expression:"showDuePicker"}},[o("v-text-field",{attrs:{slot:"activator",readonly:"",label:"Due","prepend-icon":"event",clearable:!0},on:{input:e.onChange},slot:"activator",model:{value:e.template.due,callback:function(t){e.$set(e.template,"due",t)},expression:"template.due"}}),o("v-date-picker",{attrs:{scrollable:""},on:{change:e.onChange},model:{value:e.template.due,callback:function(t){e.$set(e.template,"due",t)},expression:"template.due"}})],1),o("v-dialog",{attrs:{lazy:"","full-width":"",width:"290px"},model:{value:e.showReadyPicker,callback:function(t){e.showReadyPicker=t},expression:"showReadyPicker"}},[o("v-text-field",{attrs:{slot:"activator",readonly:"",label:"Ready","prepend-icon":"event",clearable:!0},on:{input:e.onChange},slot:"activator",model:{value:e.template.ready,callback:function(t){e.$set(e.template,"ready",t)},expression:"template.ready"}}),o("v-date-picker",{attrs:{scrollable:""},on:{change:e.onChange},model:{value:e.template.ready,callback:function(t){e.$set(e.template,"ready",t)},expression:"template.ready"}})],1),o("v-textarea",{attrs:{"auto-grow":"",label:"Content"},on:{change:e.onChange},model:{value:e.template.text,callback:function(t){e.$set(e.template,"text",t)},expression:"template.text"}})],1)},U=[],W=o("2677"),Y=o("2e4b"),Z=o("169a"),ee=o("a844"),te=o("ac7c"),oe={props:["topic"],components:{VTextField:W["a"],VDatePicker:Y["a"],VDialog:Z["a"],VTextarea:ee["a"],VCheckbox:te["a"],VBtn:h["a"]},data(){return{showDuePicker:!1,showReadyPicker:!1}},computed:{template(){return Object.assign({pinned:!0},this.topic)}},methods:{onChange(e){this.$emit("topic-changed",this.template)}}},ae=oe,ne=(o("3734"),Object(v["a"])(ae,Q,U,!1,null,null,null));ne.options.__file="Topic.vue";var se=ne.exports,ie={name:"app",components:{Topic:se,VCard:q["a"],VCardText:I["b"],VCardActions:I["a"],VBtn:h["a"],VContainer:d["a"]},computed:{selectedTopic(){return this.$store.getters.selectedTopic}},methods:{onTopicChanged(e){this.$store.dispatch("updateTopic",e)},onDelete(){this.$store.dispatch("deleteTopic",this.selectedTopic),this.$router.push("/")}}},re=ie,ce=(o("1b9b"),Object(v["a"])(re,G,J,!1,null,null,null));ce.options.__file="Edit.vue";var le=ce.exports;s["default"].use(S["a"]);var pe=new S["a"]({routes:[{path:"/",name:"home",component:X},{path:"/edit",name:"edit",component:le}]}),ue=(o("d5e8"),o("ce5b")),de=o.n(ue);s["default"].use(de.a,{iconfont:"md"}),s["default"].config.productionTip=!1;const he=window.location;var fe;fe="http:"===he.protocol?"ws:":"wss:",fe+="//"+he.host,fe+="/api/ws/updates/",s["default"].use(n.a,fe,{store:y}),new s["default"]({store:y,router:pe,render:e=>e(T)}).$mount("#app")},"5c0b":function(e,t,o){"use strict";var a=o("3d7c"),n=o.n(a);n.a},"9fb8":function(e,t,o){},df66:function(e,t,o){},e0db:function(e,t,o){"use strict";var a=o("2b80"),n=o.n(a);n.a}});
//# sourceMappingURL=app.5d25bbf1.js.map